<section mat-dialog-content>
  <h1>{{ "form.update-password" | translate }}</h1>
  <form [formGroup]="securityForm" class="content" (ngSubmit)="confirm()">
    <mat-form-field>
      <mat-label>{{ "form.password" | translate }}</mat-label>
      <input
        matInput
        [type]="hide ? 'password' : 'text'"
        formControlName="password"
      />
      <button
        mat-icon-button
        matSuffix
        (click)="hide = !hide"
        [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hide"
        type="button"
      >
        <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
      </button>
      @if (securityForm.get('password')!.invalid) {
      <mat-error>
        @if (securityForm.get('password')!.hasError('required')) {
        <span>{{ "form.error.required" | translate }}</span>
        } @if (securityForm.get('password')!.hasError('minlength')) {
        <span>{{ "form.error.minlength" | translate }}</span>
        } @if (securityForm.get('password')!.hasError('maxlength')) {
        <span>{{ "form.error.maxlength" | translate }}</span>
        }
      </mat-error>
      }
    </mat-form-field>
    <mat-form-field>
      <mat-label>{{ "form.confirm" | translate }}</mat-label>
      <input
        matInput
        [type]="hideDuplicate ? 'password' : 'text'"
        formControlName="passwordConfirmation"
      />
      <button
        mat-icon-button
        matSuffix
        (click)="hideDuplicate = !hideDuplicate"
        [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hideDuplicate"
        type="button"
      >
        <mat-icon>{{
          hideDuplicate ? "visibility_off" : "visibility"
        }}</mat-icon>
      </button>
      @if (securityForm.get('passwordConfirmation')!.invalid) {
      <mat-error>
        @if (securityForm.get('passwordConfirmation')!.hasError('required')) {
        <span>{{ "form.error.required" | translate }}</span>
        } @if (securityForm.get('passwordConfirmation')!.hasError('minlength'))
        {
        <span>{{ "form.error.minlength" | translate }}</span>
        } @if (securityForm.get('passwordConfirmation')!.hasError('maxlength'))
        {
        <span>{{ "form.error.maxlength" | translate }}</span>
        } @if
        (securityForm.get('passwordConfirmation')!.hasError('passwordMismatch'))
        {
        <span>{{ "form.error.missmatch" | translate }}</span>
        }
      </mat-error>
      }
    </mat-form-field>
    <div class="button-container">
      <button
        type="button"
        [title]="'buttons.cancel' | translate"
        (click)="cancel()"
        class="delete"
      >
        <i class="bx bx-x"></i>
        <span class="text">{{ "buttons.cancel" | translate }}</span>
      </button>
      <button type="submit" [title]="'buttons.confirm' | translate">
        <i class="bx bx-check"></i>
        <span class="text">{{ "buttons.confirm" | translate }}</span>
      </button>
    </div>
  </form>
</section>
