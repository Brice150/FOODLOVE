<section>
  <div class="title">
    <h1>Ajouter Recette</h1>
  </div>
  <form [formGroup]="recipeForm" class="content">
    <mat-stepper
      [linear]="true"
      #stepper
      background="none"
      orientation="vertical"
    >
      <mat-step [stepControl]="firstFormGroup" [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Recette</ng-template>
        <mat-form-field>
          <mat-label>Nom de la recette</mat-label>
          <input matInput formControlName="name" />
          @if (firstFormGroup.get('name')!.invalid &&
          (firstFormGroup.get('name')!.dirty ||
          firstFormGroup.get('name')!.touched)) {
          <mat-error>
            @if (firstFormGroup.get('name')!.hasError('required')) {
            <span>Le nom de la recette est obligatoire</span>
            } @if (firstFormGroup.get('name')!.hasError('minlength')) {
            <span>Le nom de la recette est trop court</span>
            } @if (firstFormGroup.get('name')!.hasError('maxlength')) {
            <span>Le nom de la recette est trop long</span>
            }
          </mat-error>
          }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Type de recette</mat-label>
          <mat-select formControlName="type">
            @for (type of RecipeType; track type) {
            <mat-option [value]="type">{{ type }}</mat-option>
            }
          </mat-select>
          @if (firstFormGroup.get('type')!.hasError('required')) {
          <mat-error>
            <span>Le type de recette est obligatoire</span>
          </mat-error>
          }
        </mat-form-field>
        <div class="slide-container">
          <span>Durée de la recette (min)</span>
          <mat-slider min="10" max="500" discrete step="5">
            <input matSliderThumb formControlName="duration" />
          </mat-slider>
        </div>
        <mat-form-field>
          <mat-label>Image</mat-label>
          <input matInput formControlName="picture" />
        </mat-form-field>
      </mat-step>
      <mat-step
        [stepControl]="secondFormGroup"
        [formGroup]="secondFormGroup"
        [state]="firstFormGroup.valid ? 'number' : 'disabled'"
      >
        <ng-template matStepLabel>Ingrédients</ng-template>
        <mat-form-field>
          <mat-label>Ingrédients de la recette</mat-label>
          <input matInput formControlName="ingredients" />
          @if (secondFormGroup.get('ingredients')!.invalid &&
          (secondFormGroup.get('ingredients')!.dirty ||
          secondFormGroup.get('ingredients')!.touched)) {
          <mat-error>
            @if (secondFormGroup.get('ingredients')!.hasError('required')) {
            <span>Les ingrédients de la recette sont obligatoires</span>
            }
          </mat-error>
          }
        </mat-form-field>
      </mat-step>
      <mat-step
        [stepControl]="thirdFormGroup"
        [formGroup]="thirdFormGroup"
        [state]="secondFormGroup.valid ? 'number' : 'disabled'"
      >
        <ng-template matStepLabel>Etapes</ng-template>
        <mat-form-field>
          <mat-label>Etapes de la recette</mat-label>
          <input matInput formControlName="steps" />
          @if (thirdFormGroup.get('steps')!.invalid &&
          (thirdFormGroup.get('steps')!.dirty ||
          thirdFormGroup.get('steps')!.touched)) {
          <mat-error>
            @if (thirdFormGroup.get('steps')!.hasError('required')) {
            <span>Les étapes de la recette sont obligatoires</span>
            }
          </mat-error>
          }
        </mat-form-field>
        <div class="button-container">
          <a (click)="addRecipe()" title="Ajouter">
            <i class="bx bx-plus"></i>
            <span class="text">Ajouter</span>
          </a>
        </div>
      </mat-step>
      <ng-template matStepperIcon="disabled">
        <i class="bx bx-block"></i>
      </ng-template>
    </mat-stepper>
  </form>
</section>
